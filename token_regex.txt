TOKEN = re.compile('''(?:(?:https?:\\/\\/)?(?:(?:(?:[^!\"\#$%&'()*+,-./:;<=>?@\\[\\]^_`{|}~ \t\n\v\f\r\u0000-\u001F\u007F\uFFFE\ufeff\uFFFF\u202a-\u202e\t-\r \u0085\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000](?:[_-]|[^!\"\#$%&'()*+,-./:;<=>?@\\[\\]^_`{|}~ \t\n\v\f\r\u0000-\u001F\u007F\uFFFE\ufeff\uFFFF\u202a-\u202e\t-\r \u0085\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000])*)?[^!\"\#$%&'()*+,-./:;<=>?@\\[\\]^_`{|}~ \t\n\v\f\r\u0000-\u001F\u007F\uFFFE\ufeff\uFFFF\u202a-\u202e\t-\r \u0085\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000]\\.)+(?:(?:[^!\"\#$%&'()*+,-./:;<=>?@\\[\\]^_`{|}~ \t\n\v\f\r\u0000-\u001F\u007F\uFFFE\ufeff\uFFFF\u202a-\u202e\t-\r \u0085\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000](?:[-]|[^!\"\#$%&'()*+,-./:;<=>?@\\[\\]^_`{|}~ \t\n\v\f\r\u0000-\u001F\u007F\uFFFE\ufeff\uFFFF\u202a-\u202e\t-\r \u0085\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000])*)?[^!\"\#$%&'()*+,-./:;<=>?@\\[\\]^_`{|}~ \t\n\v\f\r\u0000-\u001F\u007F\uFFFE\ufeff\uFFFF\u202a-\u202e\t-\r \u0085\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000])(?:(?:\\.xn--[0-9a-z]+))?)(?::([0-9]+))?(?:\\/(?:(?:[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]*(?:(?:[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]+|(?:[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]*\\([a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]+\\)[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]*))[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]*)*[a-zA-Z\\p{Cyrillic}0-9=_#\\/\\+\\-\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]|(?:(?:[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]+|(?:[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]*\\([a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]+\\)[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]*))))|(?:[a-zA-Z\\p{Cyrillic}0-9!\\*';:=\\+\\,\\.\\$\\/%#\\[\\]\\-_~&\\|@\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff]+\\/))*)?(?:\\?[a-zA-Z0-9!?\\*'\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|@]*[a-zA-Z0-9_&=#\\/\\-])?)|(?:[<>]?[:;=8][\\-o\\*\\']?[\\)\\]\\(\\[dDpPS\\/\\:\\}\\{@\\|\\\\]|[\\)\\]\\(\\[dDpPS\\/\\:\\}\\{@\\|\\\\][\\-o\\*\\']?[:;=8][<>]?|<3)|(?:-+>|<-+)|(?:[@\uff20][a-zA-Z0-9_]+(?:\\/[a-zA-Z][a-zA-Z0-9_\\-]*)?)|(?:[#\uff03][\\p{L}\\p{M}\\p{Nd}_\u200c\u200d\ua67e\u05be\u05f3\u05f4\uff5e\u301c\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u00b7]+)|(?:(?:[\\pL]+['\\-_]+)+[\\pL]+)|(?:[+\\-]?[\\pN]+([,\\/.:\\-][\\pN]+)*[+\\-]?)|(?:[\\pL\\pN_]+)|(?:[^\t-\r \u0085\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\\pL\\pN]+)''')